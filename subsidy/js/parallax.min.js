function in$(t,e){for(var n=-1,r=e.length>>>0;++n<r;)if(t===e[n])return!0;return!1}function import$(t,e){var n={}.hasOwnProperty;for(var r in e)n.call(e,r)&&(t[r]=e[r]);return t}ldc.register("parallax",[],function(){var t,e,n,r,a,i,l,u,o,s,d,p,c,f,h,m,v,y,g,$,x,C,w,B,b,F,A,N,j,z,D,E,R,S,k,q,L,M,O,P,W,G;for(t={},["kmt","dpp","new","pfp","tsu","npp"],e=[["#3CB59A","民進黨"],["#467DB4","國民黨"],["#F0753F","親民黨"],["#B4865D","台聯"],["#FFDD1F","新黨"],["#FCBE2E","時代力量"]],(n=[{year:1995,value:[15660780,21745445,6114655,0,0,0]},{year:1996,value:[15563680,25904145,7129480,0,0,0]},{year:1997,value:[156607800,217454450,61146550,0,0,0]},{year:1998,value:[445025100,698951850,106269750,0,0,0]},{year:2001,value:[517161e3,442405650,0,287675400,120234e3,0]},{year:2004,value:[694285800,638016200,0,270122600,151342400,0]},{year:2008,value:[722021200,1002160200,0,0,0,0]},{year:2012,value:[911284800,1172655800,0,144417800,235759400,0]},{year:2016,value:[1074190600,656189800,102014800,158967600,0,148863e3]}]).map(function(t){var e,n,r;return e=0,t.sum=function(){var a,i=[];for(a=0;a<6;++a)n=a,r=e,e+=t.value[n],i.push(r);return i}()}),r=e.map(function(t,e){return n.map(function(t){return t.value[e]}).reduce(function(t,e){return t+e},0)}),a=Math.max.apply(null,r),l=(i=ld$.find(document,"#parallax",0)).getBoundingClientRect(),(u=i.style).width=l.width+"px",u.height=l.height+"px",o=ld$.find(i,"svg",0),s=function(t){return 400-250*t/2e9},d=function(t){return 250*t/2e9},p=function(){return window.innerWidth<768},window.addEventListener("scroll",function(){var e,n,r,a,i,l,u;return e=ld$.find(document,"#parallax-start",0),n=ld$.find(document,"#parallax-end",0),r=n.getBoundingClientRect(),a=e.getBoundingClientRect(),r.y=r.top,a.y=a.top,i=r.y-a.y,l=p()?10:0,(u=100*(i-r.y)/i+l)<18&&1!==t.step?G(1,!1):u>=18&&u<33&&2!==t.step?G(2,!1):u>=33&&u<50&&3!==t.step?G(3,!1):u>=50&&4!==t.step?G(4,!1):void 0}),c=[],function(){return c.splice(0,c.length)},f=function(t,e,n){var r,a,i,l;null==n&&(n=330),a=(r=[{},{}])[0],i=r[1];for(l in e)e[l],a[l]=t.getAttribute(l),isNaN(+a[l])?isNaN(ldColor.hsl(a[l]).a)?/\d+/.exec(a[l])?(r=["numstr",new NumStr(a[l]),new NumStr(e[l])],i[l]=r[0],a[l]=r[1],e[l]=r[2]):(r=["string",a[l],e[l]],i[l]=r[0],a[l]=r[1],e[l]=r[2]):(r=["color",ldColor.hsl(a[l]),ldColor.hsl(e[l])],i[l]=r[0],a[l]=r[1],e[l]=r[2]):(r=["number",+a[l],+e[l]],i[l]=r[0],a[l]=r[1],e[l]=r[2]);if(t.ani={s:a,e:e,t:i,dur:n,st:0},!in$(t,c))return c.push(t)},h=[.75,0,.25,1],m=function(t){return cubic.Bezier.y(cubic.Bezier.t(t,h),h)},v=!1,y=function(t){return v=!0,c.map(function(e){var n,r,a,i,l,u,o,s,d,p,c,f,h=[];e.ani.st||(e.ani.st=t),r=(n=e.ani).s,a=n.e,i=n.t,l=n.st,u=n.dur,e.ani.percent=o=m((n=(t-l)/u)<1?n:1);for(s in r)d=r[s],"number"===i[s]?d=(a[s]-r[s])*o+r[s]:"numstr"===i[s]?d=NumStr.interpolate(r[s],a[s],o):"color"===i[s]?(p=ldColor.hsl(a[s]),c=ldColor.hsl(r[s]),f={},["h","s","l","a"].map(function(t){return f[t]=(p[t]-c[t])*o+c[t]}),d=ldColor.web(f)):d=a[s],h.push(e.setAttribute(s,d));return h}),(c=c.filter(function(t){return t.ani.percent<1})).length?requestAnimationFrame(y):v=!1},g=function(){return v||requestAnimationFrame(y),v=!0},$=[],x=[],C=[],w=[],B=[],b=0,F=n.length;b<F;++b)b,n[b],o.appendChild(A=ld$.create({ns:"svg",name:"text",attr:{class:"tick"}})),B.push(A);for(b=0,F=e.length;b<F;++b)for(b,N=e[b],o.appendChild(j=ld$.create({ns:"svg",name:"g",attr:{class:"group"}})),j.appendChild(z=ld$.create({ns:"svg",name:"g"})),z.appendChild(D=ld$.create({ns:"svg",name:"text"})),z.appendChild(E=ld$.create({ns:"svg",name:"rect"})),w.push(E),x.push(z),C.push(D),$.push(R=[]),S=0,k=n.length;S<k;++S)S,n[S],j.appendChild(q=ld$.create({ns:"svg",name:"rect",attr:{fill:N[0]}})),R.push(q);return L=function(t){var e,n,r,a,i,l;return e=t.step,n=t.node,r=t.j,a=t.year,i=t.init,n.textContent=a.year,l={"font-size":p()?20:16,x:472*(r+.5)/9+20,y:420,"text-anchor":"middle"},e<=2&&(l.opacity=0),3===e&&(l.opacity=1),i?ld$.attr(n,l):f(n,l)},M=function(t){var e,n,r,a,i;return e=t.step,n=t.node,r=t.i,t.name,t.year,t.val,a=t.init,i=1===e?{transform:"translate("+(75*r+43+25)+",281)"}:2===e?{transform:"translate("+(75*r+43+25)+",410)"}:{transform:"translate("+(30*r+166)+",450)"},a?ld$.attr(n,i):f(n,i)},O=function(t){var e,n,r,a,i;return e=t.step,n=t.node,t.i,r=t.name,t.year,t.val,a=t.init,i={x:0,y:0,width:0,height:0,rx:2,ry:2,fill:r[0]},e>=3&&import$(i,{x:-8,y:-8,width:16,height:16}),a?ld$.attr(n,i):f(n,i)},P=function(t){var e,n,r,a,i;return e=t.step,n=t.node,t.i,r=t.name,t.year,t.val,a=t.init,n.textContent=1===e?r[1]:r[1].charAt(0),i={"font-size":p()?24:16,rotate:-90,dy:"0.5em",dx:"1.75em",transform:"rotate(90)"},a?ld$.attr(n,i):f(n,i)},W=function(t){var e,n,r,a,i,l,u,o,p,c;return e=t.step,n=t.node,r=t.i,a=t.j,i=t.name,l=t.year,u=t.val,o=t.init,p={},import$(p,1===e?{rx:10,ry:10}:{rx:0,ry:0}),import$(p,{x:75*r+43,y:221,width:50,height:50,fill:i[0]}),2===e&&import$(p,{y:400-u+u/9*a,height:u/9+1}),e>=3&&import$(p,{x:472*a/9+20,width:472/9-2,y:s(l.sum[r]+l.value[r]),height:(c=d(l.value[r])-2)>0?c:0}),4===e&&import$(p,{fill:5===r?i[0]:"#ccc"}),o?ld$.attr(n,p):f(n,p)},(G=function(i,l){var u,s,d,c,f,h,m,v,y,b,F;for(null==l&&(l=!1),o.setAttribute("viewBox",p()?"-45 0 602 512":"0 0 1024 512"),t.step=i,u=0,d=(s=n).length;u<d;++u)c=u,f=s[u],L({step:i,node:B[c],year:f,j:c,init:l});for(u=0,d=(s=e).length;u<d;++u)for(h=u,m=s[u],v=350*r[h]/a,P({step:i,node:C[h],name:m,i:h,val:v,init:l}),O({step:i,node:w[h],name:m,i:h,val:v,init:l}),M({step:i,node:x[h],name:m,i:h,val:v,init:l}),y=0,F=(b=n).length;y<F;++y)c=y,f=b[y],W({step:i,node:$[h][c],name:m,year:f,i:h,j:c,val:v,init:l});return g()})(1,!0)});